# 실행 컨텍스트

## 실행 컨텍스트란?
- 소스코드를 실행하는데 필요한 환경을 제공하고 코드의 실행 결과를 실제로 관리하는 영역
- 식별자(변수, 함수, 클래스)를 등록하고 관리하는 스코프와 코드 실행 순서 관리를 구현한 내부 메커니즘
- 모든 코드는 실행 컨텍스트를 통해 실행되고 관리된다.

쉽게말해서 소스 코드를 실행시키고 관리하는 것이라고 요약할 수 있겠다.<br/>

## 소스코드  평가와 실행
모든 소스코드는 "**소스코드 평가과정**"과 "**소스코드 실행과정**" 두가지를 거친다<br>

평가과정에서 실행 컨텍스트를 생성하고, 변수, 함수만 먼저 실행해서 스코프(렉시컬 환경)에 등록한다.
평가가 끝나면 소스코드 실핼과정(런타임)이 실시되고, 실행중에 필요한 정보인 변수나 함수의 참조등은 실행컨텍스트에서 검색해서 가져오고
변수 값이 변경되는 업데이트가 발생하면 다시 실행 컨텍스트의 스코프에 등록된다.

    var x = 1;
    
    // 소스코드 평가 과정
    // var x를 먼저 실행하고, undefined로 초기화
    var x;
    
    // 소스 코드 실행 과정
    // 1. x 변수가 선언된 변수인지 실행 컨텍스트가 관리하는 스코프에서 확인
    // 2. x가 선언된 변수라면 값을 할당, 할당 결과를 실행 컨텍스트에 등록
    x = 1;





## 실행 컨텍스트 스택
실행 컨텍스트 스택은 흔히들 말하는 콜 스택이다. <br>
모든 코드는 실행될 때 실행 컨텍스트가 생성되고 컨텍스트들은 스택에 쌓이게 된다.<br/>
아래 4가지 소스코드는 실행 컨텍스트를 생성한다.
- 전역코드 
- 함수코드
- eval코드
- 모듈코드

우선 전역 코드와 함수코드 예제를 통해서 실행 컨텍스트가 생성되고 스택에 쌓이는 순서를 보자

    // 1. 전역 코드 평가 : 변수 x 와 함수 foo를 평가
    // 2. 전역 실행 컨택스트를 생성하여 콜스택에 push , x와 foo 전역 실행 컨텍스트에 등록
    // 3. 전역 코드 실행
    const x = 1
    
    function foo() {
        // 5. 함수코드 평가 : 변수 y와 foo를 평가
        // 6. foo 함수 실행 컨텍스트를 생성하여 콜스택에 push, y와 bar foo 함수 실행 컨텍스트에 등록
        // 7. foo 함수 실행
        const y = 2

        function bar() {
            // 9. 함수코드 평가 : 변수 z를 평가
            // 10. bar 함수 실행 컨텍스트를 생성하여 콜스택에 push, z를 bar 함수 실행 컨텍스트에 등록
            // 11. bar 함수 실행
            const  z = 3
    
            // 12. console.log 호출
            console.log(x + y + z)

        } // 13. 함수 종료 : 함수 호출 이전인 foo로 돌아간다
    
        // 8. bar 함수 호출, foo 호출과 마찬가지로 제어권 이동
        bar()

    } // 14. 함수 종료 : 함수 호출 이전인 전역으로 돌아간다
    
    // 4. 전역 함수 호출: 전역 코드 실행이 일시중단 , 코드 제어권이 foo 함수 내부로 이동
    foo() // 6

쉽게 생각하면 전역실행컨텍스트에 변수와 함수를 등록하고 콜스택에 쌓이고, <br/>
함수가 실행되면 또 함수실행컨텍스트에 함수 안에 있는 변수와 함수를 등록하고 컨텍스트가 콜스택에 쌓이는 식이다.


